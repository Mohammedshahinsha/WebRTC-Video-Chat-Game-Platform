<!DOCTYPE html>
<html lang="en">
<head>
    <base href="/chatforyou/">
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="js/roomlist/bootstrap-show-password.min.js"></script>
    <script src="js/roomlist/roomlist.js"></script>
    <script src="config/config.js"></script>
    <title>채팅방 리스트</title>
    <style>
        a {text-decoration: none;}
        #table {margin-top: 40px;}
        h2 {margin-top: 40px;}
        input#maxUserCnt {width: 160px;}
        span.input-group-text.input-password-hide {height: 40px;}
        span.input-group-text.input-password-show {height: 40px;}
    </style>
</head>
<body>
<div id="visitorCount" style="position: absolute; top: 10px; right: 10px;"></div>
<div class="container">
    <div class="container">
        <h2>채팅방 리스트</h2>
        <button class="btn btn-primary" type="button" id="showUpdatesButton">업데이트 내역 확인하기</button>
        <button class="btn btn-info" type="button" data-bs-toggle="modal" data-bs-target="#roomModal">방 생성</button>
        <table class="table table-hover" id="table">
            <thead>
            <tr>
                <th scope="col">채팅방명</th>
                <th scope="col">잠금 여부</th>
                <th scope="col">참여 인원</th>
                <th scope="col">채팅 종류</th>
                <th scope="col">채팅방 설정</th>
            </tr>
            </thead>
            <tbody id="roomTableBody">
            <!-- JS에서 동적으로 방 리스트 렌더링 -->
            </tbody>
        </table>
    </div>
</div>
<script src="js/common/ajaxUtil.js"></script>

<!-- 토스트 메시지 영역 -->
<div id="toast-container" style="position:fixed;top:20px;right:20px;z-index:9999;"></div>

</div>

<!-- Popup 파일들 로드 -->
<script src="js/popup/popup-loader.js"></script>
<script>
// 페이지 로드 후 popup들을 동적으로 로드
$(document).ready(function() {
    // room popup 로드
    PopupLoader.loadPopup('room', 'room_popup', function() {
        console.log('Room popup loaded successfully');
    });
    
    // room settings popup 로드
    PopupLoader.loadPopup('room_settings', 'room_settings_popup', function() {
        console.log('Room settings popup loaded successfully');
    });
    
    // announcement popup 로드
    PopupLoader.loadPopup('announcement', 'announcement_popup', function() {
        console.log('Announcement popup loaded successfully');
    });
});
</script>
</body>
</html>